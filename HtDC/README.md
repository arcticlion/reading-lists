About
=====

English name:How to Design Programs: An Introduction to Programming and Computing

中文名：程序设计方法

作者：Matthias Felleisen、Robert Bruce Findler、Matthew Flatt和Shriram Krishnamurthi

译者: 黄林鹏 / 朱崇恺

### 前言

许多职业都需要进行某种形式的计算机编程，会计师使用电子表格和字处理软件编程，摄影师使用图片编辑器编程，音乐家使用音乐合成器编程，职业程序员使用计算机编程。编程已经称为了一种人人都需要掌握的技能。

编写程序并不仅仅是一种职业技能。事实上，好的编程是件有趣的事，是一种创造性的情感发泄，也是一种用有形的方式表达抽象思维的方法。程序设计可以教会人们多种技能，如阅读判断，分析思考，综合创造以及关注细节，等等，这些技能对各种类型的职业来说都是重要的。

#### 每个人都应该学习如何设计程序

一方面，程序设计跟教学一样，可以训练人的分析能力，程序设计是一种积极的学习方法。在与软件的互动过程中，学生可以直接得到反馈，进行探索，实验和自我评价。与钻研数学习题比起来，程序设计的成果即计算机软件，更有趣，也更有用，它们能极大地增加学生的成就感。另一方面，程序设计跟语文一样，可以增强学生的阅读和写作能力。即使是最小的编程任务，也是以文字形式表达的，没有良好的判断和阅读技能不可能设计出符合规范的程序，反之，好的程序设计方法会迫使学生用适当的语言清晰地表达他的思考过程。

本书讨论如何从问题描述产生组织严谨的程序。本书把注意力集中于程序的设计过程，不强调算法和语言细节，不注重于某个特定的应用领域。这门程序设计课程有两个根本性的创新。创新之一是给出一系列明确的程序设计指导。现有的程序设计课程往往趋向于给出含糊的、不明确的建议，如“自上而下设计”或者“结构化程序设计”等。与此同时，本书给出了一系列程序设计指导，由此引导学生一步一步地从问题的描述出发，通过明确定义的中间过程，得出程序。在这个过程中，学生学会阅读、分析、组织、实验和系统思维能力。创新二是使用了一个全新的程序设计环境。本书位初学者提供的程序设计环境会随着你所掌握的知识的多少而改变，该环境可以至此完整的Scheme语言，使用该语言既可以编写大型程序又能编写脚本程序，可以完成所有领域的编程任务。

本书讨论的编程指导以程序设计诀窍（programming design recipe）阐述。设计诀窍指导程序设计初学者逐步掌握问题求解的过程。有了设计诀窍，程序设计初学者可以使用“问答”方式进行程序设计并取得进步。

本书识别问题的范畴来建立设计诀窍，而问题范畴的识别基于表示相关信息的数据类型。从该数据类型所描述的结构出发，你可以用一个清单推导出程序。图1给出的设计诀窍包含了程序设计的6个基本步骤。

|     程序设计诀窍的基本部分    |
| ----------------------------- |
| 1. 问题分析和数据定义         |
| 2. 合约,用途说明与结果的描述，函数头部|
| 3. 例子                       |
| 4. 函数模版                   |
| 5. 函数定义                   |
| 6. 测试                       |

每个步骤都将产生定义明确的中间结果。

1. 问题数据类型描述
2. 程序行为的非正式描述
3. 说明程序行为的例子
4. 开发程序的模版或视图
5. 把模版转换成完整的定义
6. 通过测试发现错误

设计诀窍的每一阶段都产生一个定义明确，可检查的结果。遇到困难，可以借助清单检查他的中间结果，并判断问题之所在。

#### 为什么每个人都应该学习编写程序

本书以最小影响原则讲授编程思想，着重于分析问题和解决问题的技能。

要想更好地理解现代编程思想，我们仔细观察一下目前流行的应用程序包，如电子表格，用户先把描述一个单元A和另一个单元B依赖关系的公式输入电子表格，接着，输入单元B的值，电子表格就会自动计算单元A的值。

其他应用程序包也需要类似的计算。考虑文字处理软件模版，当提供了特定的词句之后，文字处理软件就会把样式表中的名字替换为特定的词句，从而建立文档。类似地，某个进行网页搜索的人可能会制定若干个关键词，给定关键词之间的顺序以及哪个关键词不必在网页中出现。

使用程序生成器的技巧其实就是使用应用程序的技巧，程序生成器由高层功能描述生成传统程序设计语言代码，例如销售管理系统，用户只需要把数量，销量以及库存输入并描述计算过程。而程序的其余部分，特别是如何与用户交互以及如何将数据存储于计算机磁盘等等，则几乎或完全不需要人的干预。

实际上，这些活动都是某种形式的编程，其本质可归结如下；

1. 把某个量与另一个量相关联
2. 用值代换名进行关系计算

事实上，上述两个概念刻画了使用最低级的程序设计语言，如机器语言，和使用最流行的程序设计语言，如Java，进行编程的本质。程序将输出和输入相联系，将程序应用于特定的输入，就是在计算中用具体的值代替相关的名字。

掌握了编程，在学习代数的时候，通过现代化的程序设计语言和程序设计环境，让代数学习的过程变得更加高效和有趣。

#### 设计诀窍

程序设计者先形成程序框架，然后翻译为最初的程序版本，再反复修改，直到与最初的想法相符。事实上，好的程序员会多次编辑和修改自己的程序，最终达到某种形式的标准。

设计诀窍类似于控球技巧、写作技巧、乐曲编排技巧和绘图技巧。

本书大约有一半的设计诀窍涉及数据和程序之间的关系。更准确地说，它们描述了如何从输入数据的描述得出整个程序的模版，这种基于数据驱动的程序设计方式最常见，易于创建，理解，扩展和修改，其他设计诀窍有生成递归（generative recursion），累积（accumulation）和历史敏感性（history sensitivity）。其中递归型程序可以被重复调用以处理新的问题；带累积器的程序在处理输入的过程中收集数据；历史敏感性程序可以记住程序被多次调用的信息。抽象程序的设计技巧，抽象是把两个（或更多）相似的设计概括为一个并由它衍生最初示例。

在许多场合下，往往会由问题联想到设计诀窍。另外一些场合下，则必须在几种可能性中作出选择，不同的设计诀窍可能会导致不同的程序结构，它们之间的差别可能非常大。我们希望通过制定一系列设计诀窍来帮助程序员理解选择什么以及如何进行选择。

要正确设计程序，你必须：

1. 分析通常使用文字表述的问题
2. 在抽象表达问题实质的同时使用例子进行说明
3. 用精确的语言阐明所表述的语句和注释
4. 通过检查，测试对上述活动进行评价和修改
5. 关注细节

#### 选用Scheme和DrScheme

本书选择Scheme作为编程语言，辅助程序设计环境为Dr Scheme。

本书仅使用6种Scheme结构（它们是函数定义和调用，条件表达式，结构体定义，局部定义以及赋值等）以及大约12个基本函数。

选用Scheme是很自然的。首先，程序员可以把注意力集中于两个要素，即前面所指出的基本编程原则：程序就是数量之间的关系，对于特定的输入求取结果。

其次，可以方便地将Scheme组织成从简单到复杂的一系列不同级别的语言。DrScheme实现了若干个不同层次的Scheme设计环境。不同的环境会给出与学生当前知识水平相适应的错误信息。更好的是，分层会避免许多基本错误。

另外，DrScheme提供了一个真正的交互式环境。环境由两个窗口组成：一个是Definitions窗口，在其中定义程序，另一个是交互窗口，其行为就像是一个袖珍计算器，计算由袖珍计算器完成。

最后，使用包含丰富数据结构的交互式程序设计环境可以让学生把注意力集中于问题的解决和程序设计活动之上。关键的改进是，交互式求值环境避免了（几乎是）多余的关于输入和输出的讨论。这一改进带来了几种结果。第一，使用固定方式的输入和输出，能将精力集中于问题求解技术的学习;第二，良好的面向文字的输入需要深奥的编程技能，最好从问题求解的课程中学习。

#### 本书正文部分

本书由8个部分和7个独立的章节（书中第8，13，18，24，29，33，38章）组成。8个部分主要讨论程序设计，独立章节则介绍一些与程序设计和计算相关的话题。图二给出了本书中各部分之间的依赖关系。

```
                     +----------------+                                                                            
                     |                |                                                                            
                     |    第一部分     |                                                                            
                     |                |                                                                            
                     +-------+-+------+                                                                            
                             |｜                                                                                  
          +------------------+｜                                                                                  
          |                   |                                                                                    
          |                   |                                                                                    
+---------v------+   +--------v-------+                                                                            
|                |   |                |                                                                            
|      第 8 章   |   |      第二部     |                                                                            
|                |   |                |                                                                            
+----------------+   +--------++------+                                                                            
                              ||                                                                                   
                              ++----------------------------------------------+                                    
                              |                                               |                                    
                              |                                               |                                    
                     +----------------+                            +----------v---------+                          
                     |        v       |                            |                    |                          
                     |    第 13 章     |                            |      第 18 章      |                          
                     |                |                            |                    |                          
                     +--------+-------+                            +----------+---------+                          
                              |                                               |                                    
                              |                      <+------------------------------------------------+           
                              |                       |                       |                        |           
                              |                       |                       |                        |           
                     +--------v-------+      +--------v-------+     +---------v--------+     +---------v---------+ 
                     |                |      |                |     |                  |     |                   | 
                     |    第三部分     |      |    第四部分      |     |     第五部分      |     |      第七部分      | 
                     |                |      |                |     |                  |     |                   | 
                     +----------------+      +--------+-------+     +---------+--------+     +---------+---------+ 
                                                      |                       |                        |           
                                                      |                       |                        |           
                                                      |                       |                        |           
                                                      |                       |                        |           
                                             +--------v-------+     +---------v--------+      +--------v---------+ 
                                             |                |     |                  |      |                  | 
                                             |    第 24 章    |     |     第 29 章      |      |    第 38 章节      | 
                                             |                |     |                  |      |                  | 
                                             +----------------+     +---------+--------+      +--------+---------+ 
                                                                              |                        |           
                                                                              |                        |           
                                                                              |                        |           
                     +-----------------+                                      |                        |           
                     |                 |                                      |                        |           
                     |   第 33 章              |                            +---------v--------+       +-------v----------+
                     |                 |                            |                  |       |                  |
                     +-----------------+                            |      第六部分     |       |   第八部分        |
                                                                    |                  |       |                  |
                                                                    +------------------+       +------------------+
```
本书第一至第三部分包括了基于数据驱动的程序设计基础。第四部分介绍了程序设计中的抽象问题。第五部分和第六部分与递归及累积相关。本书前6部分使用了纯函数式（或称代数式）的程序设计风格，即无论计算多少遍，同一个表达式每次计算的结果总是相同。不过，为了处理程序之间的接口和解决其他领域的问题，我们放弃了部分代数性质，引入了赋值语句。本书的最后两部分说明了设计程序的意义，更精确地说，它们阐述了如何应用前6个部分所描述的程序设计诀窍，以及使用赋值语句必须特别小心的一些问题。

独立章节则介绍一般性的，非本质的，对计算和程序本身来说是重要的话题，有的是在严格的基础上介绍本书说选定的Scheme子集的语法和语义，有的是介绍了另外的程序设计结构。独立章节5（第29章）讨论了抽象的计算开销（包括时间和空间开销），并介绍了向量的概念。独立章节6（第33章）则比较了两种数值表示技术以及处理它们的方法。

#### 程序的逐步求精

系统化程序设计方法对于开发大型项目特别有意义，而开发单一函数到小规模的包括多个函数的项目则需要另外一种设计思想：逐步求精，即先设计程序核心，再增加功能，直至满足整个需求目标为止。

第16章将明确阐述这个思想。

本书通过逐步把功能加到一个程序体中的方法来示范为什么程序员必须遵循设计诀窍，借助问题的解决方式向学生展示如何在可用的设计诀窍进行选择。有时候新知识的作用只是帮助学生改进程序的组织结构，换句话说，要让学生了解到在他们初步的工作完成之后，编程过程并没有结束，如撰写论文和书籍一样，程序也需要进一步的编辑和修改。



