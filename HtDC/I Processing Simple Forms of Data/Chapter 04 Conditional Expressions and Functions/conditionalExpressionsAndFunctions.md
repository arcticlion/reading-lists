条件表达式和函数
===============

对于许多问题，计算机程序必须以不同的方式处理不同的可能情况。如，一个游戏程序必须确定一个物体的移动速度**是否**在**某个范围之内**或确定一个物体**是否**位于屏幕某个**特定的区域**。而对于一个控制电机运行的程序，则可能需要描述描述阀门什么情况下应被打开。为了处理这些情况，我们必须使用一种方式来阐述所条件为真或为假，即需要一种新的数据类型。通常，该类型的值被称为布尔值（或真值）。本节介绍布尔类型，计算为布尔值的表达式以及依赖于布尔值进行计算的表达式。

### 布尔类型和关系

考虑一下问题：
XYZ公司给雇员的报酬是每小时12美元。通常一个员工每周工作20到65小时。*如果一个雇员每周工作时数在上述范围内*，试编写程序确定其周工资。

斜体部分表示了程序必须以某种方式处理它的输入，如果输入在给定范围内，按常规进行，否则，则需考虑其他的计算公司。简而言之，就像人们对不同的情况分别进行推理一样，程序使用条件表达式对不同的情况进行计算。

条件并不是一种新的概念，数学所说的断言的真假就是一种条件。例如，一个数可能等于，小于或大于另一个数。因此如果x和y是数，则关于x和y的关系如下：

1. x = y：x等于y；
2. x < y: x严格小于y；
3. x > y: x严格大于y。

对于任何一对给定的（实）数，上述断言有其只有一个是正确的。一般地，一个断言对于变量的某些取值为真，其余取值为假。

除了确定一个基本断言在给定的情况下是否为真以外，有时确定断言的组合是否为真也很重要。考虑以下3个断言，它们可以以下面的方式组合在一起：

1. x = y且x < y 且 x > y;
2. x = y或x < y 或 x > y;
3. x = y或x < y

第1个复合断言是假的，因为  不管x和y的值为何，3个断言中有2个必定为假，因此其组合也为假；另外，不管x和y取何值，第2个复合断言为真；最后，第3个复合断言，在一些情况下为真，在另一些情况下为假。

与数学语言一样，Scheme中有自己表示真假的词汇，有陈述基本断言的词汇，有将基本断言组合为复合断言的词汇。在Scheme中，真表示为true，假表示false。如果断言涉及两个数的关系，通常会用关系操作，如＝，< 和 > 等。

上述三个数学断言的转换遵循大家所熟悉的先写括号，再写操作符，然后是参数，最后是右括号这样的Scheme表达式结构：

```
(= x y): x等于y；
(< x y): x严格小于y；
(> x y): x严格大于y。
```

以后大家还会遇到诸如`<=`和`>=`这样的关系操作符。

比较两个数值大小的Scheme表达式和其他Scheme表达式一样有一个结果，但其结果不是数值，而是true和false。当关于两个数的Scheme断言为真时，值为true，如

```
  (< 4 5)
= true
```

断言为假时，值为false，如

```
  (= 4 5)
= false
```

复合条件在Scheme中的表示也很自然。如果要把`(= x y)`和`(< x y)`组合在一起，表示当两个条件为真时复合断言为真，可以写成：

```
(and (= x y) (< y z))
```

类似地，如果想表示至少两个条件之一为真时，复合断言为真。

```
(or (= x y) (< y z))
```

最后，下述表达式。

```
(not (= x y))
```

表示断言的否定为真。

下面一些章节将解释为何程序设计需要明确地对条件进行陈述和推理。

### 函数和条件测试

下面是一个简单的对变量取值进行测试的函数：

```
;; is-5? : number -> boolean
;; 确定n是否等于5
(define (is-5? n)
  (= n 5))
```
该函数仅当输入为5时，值为true。在函数的合约中包含了一个新的要素boolean。与number一样boolean是Scheme内建的一种数据类型。不同的是，boolean仅包含两个值，true和false。

下面是一个稍微有点意思的输出类型为boolean的函数：

```
;; is-boolean-5-6? : number -> boolean
;; 确定n的值是否位于5和6之间（不包括5和6）
 (define (is-between-5-6? n)
  (and (< 5 n) (< n 6)))
```
如果输入的值介于5和6之间（不包括5和6），函数输出结果为true。理解此类函数的一种较好的方式是认为函数划分了数轴上的一个区间：



区间边界：一个以“（”或“）”标识的区间是不包含边界的，而以“［”或“］”标识的区间则包含边界。

下述函数划了一个较为复杂的区间：

```
;; is-between-5-6-or-over-10? : number -> boolean
;; 确定n是否介于5和6之间（不包括5和6）或者大于等于10
(define (is-between-5-6-or-over-10? n)
  (or (is-between-5-6? n) (>= n 10)))
```
对于数轴上两个区间内的任何数值，函数返回true：

左边区间是5和6之间，但不包括5和6的任何数值，右边是从10开始且包括10的无限区间，数轴上两个区间的点都满足函数is-between-5-6-or-over-10中的条件表达式。

上述3个函数对数值进行了条件测试。为了设计或理解此类函数，必须理解区间和它们的组合（也称为区间的并）。


